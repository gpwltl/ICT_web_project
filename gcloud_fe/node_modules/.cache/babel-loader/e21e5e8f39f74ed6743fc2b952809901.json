{"ast":null,"code":"var _jsxFileName = \"/Users/hyeji/ICT_web_project/gcloud_fe/src/components/games/Lotto/Lotto.js\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport Ball from \"./Ball\";\n\nfunction getWinNumbers() {\n  console.log(\"getWinNumbers\");\n  const candidate = Array(45).fill().map((v, i) => i + 1);\n  const shuffle = [];\n\n  while (candidate.length > 0) {\n    shuffle.push(candidate.splice(Math.floor(Math.random() * candidate.length), 1)[0]);\n  }\n\n  const bonusNumber = shuffle[shuffle.length - 1];\n  const winNumbers = shuffle.splice(0, 6).sort((p, c) => p - c);\n  return [...winNumbers, bonusNumber];\n}\n\nconst Lotto = () => {\n  const [winNumbers, setWinNumbers] = useState(getWinNumbers());\n  const [winBalls, setWinBalls] = useState([]);\n  const [bonus, setBonus] = useState(null);\n  const [redo, setRedo] = useState(false);\n  const timeouts = useRef([]);\n  useEffect(() => {\n    for (let i = 0; i < winNumbers.length - 1; i++) {\n      timeouts.current[i] = setTimeout(() => {\n        setWinBalls(prevBalls => [...prevBalls, winNumbers[i]]);\n      }, (i + 1) * 1000); // 1초 간격으로 출력\n    }\n\n    timeouts.current[6] = setTimeout(() => {\n      // 보너스공\n      setBonus(winNumbers[1]);\n      setRedo(true);\n    }, 7000);\n    return () => {\n      timeouts.current.forEach(v => {\n        clearTimeout(v);\n      });\n    };\n  }, [timeouts.current]); // winBalls.length === 0으로 설정하면 처음 실행부터 적용되므로 중복된 숫자가 2번 나옴\n\n  const onClickRedo = () => {\n    // 초기화\n    setWinNumbers(getWinNumbers());\n    setWinBalls([]);\n    setBonus(null);\n    setRedo(false);\n    timeouts.current = [];\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, \"\\uB2F9\\uCCA8 \\uC22B\\uC790\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"\\uACB0\\uACFC\\uCC3D\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, winBalls.map(v => /*#__PURE__*/React.createElement(Ball, {\n    key: v,\n    number: v,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"\\uBCF4\\uB108\\uC2A4\"), bonus && /*#__PURE__*/React.createElement(Ball, {\n    number: bonus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }), redo && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onClickRedo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }\n  }, \"\\uD55C \\uBC88 \\uB354!\"));\n};\n\nexport default Lotto;","map":{"version":3,"sources":["/Users/hyeji/ICT_web_project/gcloud_fe/src/components/games/Lotto/Lotto.js"],"names":["React","useState","useRef","useEffect","Ball","getWinNumbers","console","log","candidate","Array","fill","map","v","i","shuffle","length","push","splice","Math","floor","random","bonusNumber","winNumbers","sort","p","c","Lotto","setWinNumbers","winBalls","setWinBalls","bonus","setBonus","redo","setRedo","timeouts","current","setTimeout","prevBalls","forEach","clearTimeout","onClickRedo"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport Ball from \"./Ball\";\n\nfunction getWinNumbers() {\n  console.log(\"getWinNumbers\");\n  const candidate = Array(45)\n    .fill()\n    .map((v, i) => i + 1);\n  const shuffle = [];\n  while (candidate.length > 0) {\n    shuffle.push(\n      candidate.splice(Math.floor(Math.random() * candidate.length), 1)[0]\n    );\n  }\n  const bonusNumber = shuffle[shuffle.length - 1];\n  const winNumbers = shuffle.splice(0, 6).sort((p, c) => p - c);\n  return [...winNumbers, bonusNumber];\n}\n\nconst Lotto = () => {\n  const [winNumbers, setWinNumbers] = useState(getWinNumbers());\n  const [winBalls, setWinBalls] = useState([]);\n  const [bonus, setBonus] = useState(null);\n  const [redo, setRedo] = useState(false);\n  const timeouts = useRef([]);\n\n  useEffect(() => {\n    for (let i = 0; i < winNumbers.length - 1; i++) {\n      timeouts.current[i] = setTimeout(() => {\n        setWinBalls((prevBalls) => [...prevBalls, winNumbers[i]]);\n      }, (i + 1) * 1000); // 1초 간격으로 출력\n    }\n    timeouts.current[6] = setTimeout(() => {\n      // 보너스공\n      setBonus(winNumbers[1]);\n      setRedo(true);\n    }, 7000);\n    return () => {\n      timeouts.current.forEach((v) => {\n        clearTimeout(v);\n      });\n    };\n  }, [timeouts.current]); // winBalls.length === 0으로 설정하면 처음 실행부터 적용되므로 중복된 숫자가 2번 나옴\n\n  const onClickRedo = () => {\n    // 초기화\n    setWinNumbers(getWinNumbers());\n    setWinBalls([]);\n    setBonus(null);\n    setRedo(false);\n    timeouts.current = [];\n  };\n\n  return (\n    <>\n      <div>당첨 숫자</div>\n      <div id=\"결과창\">\n        {winBalls.map((v) => (\n          <Ball key={v} number={v} />\n        ))}\n      </div>\n      <div>보너스</div>\n      {bonus && <Ball number={bonus} />}\n      {redo && <button onClick={onClickRedo}>한 번 더!</button>}\n    </>\n  );\n};\n\nexport default Lotto;\n"]},"metadata":{},"sourceType":"module"}